---
import PackageCard from './PackageCard.astro';
import { packages } from '../data/packages';
---

<section id="harga" class="py-16 md:py-24 bg-white dark:bg-background-dark transition-colors duration-300">
  <div class="px-4 md:px-10 lg:px-24 max-w-[1440px] mx-auto">
    <div class="text-center mb-16 scroll-animate" data-animation="fade-in-up">
      <h2 class="text-text-primary dark:text-white text-3xl md:text-4xl font-bold mb-4">
        Pilihan Paket Kursus
      </h2>
      <p class="text-gray-500 dark:text-gray-400 max-w-2xl mx-auto">
        Pilih paket yang sesuai dengan kebutuhan Anda. Tersedia 4 pilihan paket terbaik untuk Manual dan Matic.
      </p>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 items-start">
      {packages.map((pkg, index) => (
        <div 
          class="scroll-animate" 
          data-animation="fade-in-up" 
          data-delay={index * 150}
        >
          <PackageCard pkg={pkg} />
        </div>
      ))}
    </div>
    
    <div class="mt-12 text-center scroll-animate" data-animation="fade-in" data-delay="600">
      <p class="text-sm text-gray-500 dark:text-gray-400 flex items-center justify-center gap-2">
        <span class="material-symbols-outlined text-lg">info</span>
        Harga paket dapat berubah sewaktu-waktu. Hubungi admin untuk promo terbaru.
      </p>
    </div>
  </div>
</section>

<script>
  // Intersection Observer for scroll animations
  function initScrollAnimations() {
    const animatedElements = document.querySelectorAll('.scroll-animate');
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const el = entry.target as HTMLElement;
          const animation = el.dataset.animation || 'fade-in-up';
          const delay = parseInt(el.dataset.delay || '0');
          
          setTimeout(() => {
            el.classList.add('is-visible');
            el.classList.add(`animate-${animation}`);
          }, delay);
          
          observer.unobserve(el);
        }
      });
    }, {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    });
    
    animatedElements.forEach(el => {
      observer.observe(el);
    });
  }
  
  // Initialize when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initScrollAnimations);
  } else {
    initScrollAnimations();
  }
</script>
