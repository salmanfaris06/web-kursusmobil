---
import type { Package } from '../data/packages';
import { getWhatsAppUrl } from '../data/site';

interface Props {
  pkg: Package;
}

const { pkg } = Astro.props;
const whatsappUrl = getWhatsAppUrl(`Halo, saya tertarik dengan ${pkg.name}`);
const isRecommended = pkg.recommended;
---

<div class={`relative flex flex-col rounded-2xl p-6 h-full package-card-hover transition-all duration-300 ${
  isRecommended 
    ? 'border-2 border-primary bg-white dark:bg-card-dark-alt shadow-xl shadow-blue-100/50 dark:shadow-primary/10 transform md:-translate-y-4 z-10' 
    : 'border border-gray-200 dark:border-gray-800 bg-background-light dark:bg-card-dark hover:border-primary/50'
}`}>
  {isRecommended && (
    <div class="absolute top-0 right-0 -mt-3 mr-4 bg-primary text-white text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-wide animate-pulse">
      Recommended
    </div>
  )}
  
  <div class="mb-4">
    <h3 class={`text-lg font-bold ${isRecommended ? 'text-primary' : 'text-gray-700 dark:text-gray-300'}`}>
      {pkg.name}
    </h3>
    <div class="flex items-baseline gap-1 mt-2">
      <span class="text-3xl font-bold text-text-primary dark:text-white">{pkg.priceFormatted}</span>
    </div>
    <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">{pkg.description}</p>
  </div>
  
  <ul class="flex-1 space-y-3 mb-6 text-sm">
    {pkg.features.map((feature, index) => (
      <li class="flex items-center gap-2 text-text-primary dark:text-gray-200 feature-item" style={`animation-delay: ${index * 50}ms`}>
        <span class={`material-symbols-outlined text-xl ${isRecommended ? 'text-primary' : 'text-green-500'}`}>
          {isRecommended ? 'check_circle' : 'check'}
        </span>
        {feature}
      </li>
    ))}
  </ul>
  
  <a
    href={whatsappUrl}
    target="_blank"
    rel="noopener noreferrer"
    class={`w-full rounded-xl py-3 text-sm font-bold transition-all duration-300 mt-auto text-center block transform hover:scale-[1.02] active:scale-[0.98] ${
      isRecommended 
        ? 'bg-primary hover:bg-primary-dark text-white shadow-lg shadow-primary/25 hover:shadow-xl hover:shadow-primary/30' 
        : 'border border-gray-300 dark:border-gray-600 bg-transparent hover:bg-gray-100 dark:hover:bg-gray-700 text-text-primary dark:text-white hover:border-primary'
    }`}
  >
    Pilih {pkg.tier === 'pro' ? 'Pro' : 'Basic'}
  </a>
</div>
